# AI AlphaTrader (A-Share) ğŸŸ¢

é¢å‘ A è‚¡æ¨¡æ‹Ÿ/ç­–ç•¥éªŒè¯çš„ AI äº¤æ˜“åŠ©æ‰‹ï¼Œå‰ç«¯åŸºäº Vite + React + TypeScriptï¼Œåç«¯ä½¿ç”¨ Express + sqlite3ï¼Œå¦æä¾› Tauri åŒ…è£…ä»¥åˆ†å‘æ¡Œé¢ç‰ˆæœ¬ã€‚

## æ ¸å¿ƒç‰¹æ€§
- å¤šæ™ºèƒ½ä½“äº¤æ˜“é¢æ¿ï¼šç›‘æ§è¡Œæƒ…ã€æ‰§è¡Œç­–ç•¥ã€æŸ¥çœ‹äº¤æ˜“æ—¥å¿—ä¸èµ„é‡‘æ›²çº¿ã€‚
- æ•°æ®ä¸æœåŠ¡åˆ†å±‚ï¼šå‰ç«¯åœ¨ `services/` ç»Ÿä¸€å°è£…è¡Œæƒ…ã€Gemini æ¨ç†ã€é€šçŸ¥ã€æŒä¹…åŒ–è°ƒç”¨ã€‚
- è¡Œæƒ…é‡‡é›†ï¼š`server/eastmoney.py` æä¾›ä¸œè´¢ push2/push2his å…¨é‡ä¸»è¡¨ã€å®æ—¶è¡Œæƒ…ã€æ—¥çº¿ K çº¿æŠ“å–ï¼Œè½åœ° SQLiteï¼ˆ`a_stock_master` / `a_stock_kline_daily`ï¼‰ï¼Œæ”¯æŒä»…åˆ·æ–°ä»·æ ¼ã€‚
- å¯é€‰åç«¯ï¼š`server/` æä¾› Express + sqlite3 API ä¸ schemaï¼›æ— åç«¯æ—¶å‰ç«¯ä¹Ÿå¯ç‹¬ç«‹è¿è¡Œã€‚
- æ¡Œé¢å‘è¡Œï¼š`src-tauri/` é›†æˆ Tauriï¼Œå¯æ‰“åŒ…ä¸ºæ¡Œé¢åº”ç”¨ï¼Œsidecar å¯åŠ¨åç«¯å¹¶å…±ç”¨æ•°æ®åº“ã€‚

## é¡¹ç›®ç»“æ„
```
App.tsx                 # ä¸»åº”ç”¨å…¥å£
components/             # UI ç»„ä»¶ï¼ˆSideBarã€Chartsã€Settings ç­‰ï¼‰
contexts/               # çŠ¶æ€/è¯­è¨€/é‰´æƒä¸Šä¸‹æ–‡
services/               # è¡Œæƒ…ã€AIã€é€šçŸ¥ã€æ•°æ®æ¥å£å°è£…
server/                 # Express + sqlite3 åç«¯ï¼ˆindex.jsã€schema.sqlï¼‰
src-tauri/              # Tauri é…ç½®ä¸ Rust å…¥å£
types.ts                # å…±äº«ç±»å‹å®šä¹‰
```

## ç¯å¢ƒä¸é…ç½®
- Node.js 18+ï¼ˆå»ºè®®ï¼‰ï¼ŒRust toolchainï¼ˆç”¨äº Tauriï¼‰ï¼Œsqlite3 ç”± npm è‡ªåŠ¨å®‰è£…ï¼›Python 3.10+ï¼ˆè¿è¡Œä¸œè´¢æŠ“å–è„šæœ¬ï¼‰ï¼Œéœ€è‡ªè¡Œå®‰è£… `pandas`ã€`requests`ã€‚
- åœ¨æ ¹ç›®å½•åˆ›å»º `.env.local`ï¼Œç¤ºä¾‹ï¼š
```bash
GEMINI_API_KEY=your_key_here
VITE_API_BASE=http://127.0.0.1:3001/api   # å¯é€‰ï¼Œå‰ç«¯è°ƒç”¨çš„åç«¯åŸºå€
VITE_FORCE_BACKEND=true                   # å¯é€‰ï¼Œé»˜è®¤æ‰“åŒ…ç‰ˆå¼ºåˆ¶èµ°åç«¯ï¼›è®¾ä¸º false æ—¶å…è®¸å‰ç«¯ç›´è¿ä¸œè´¢
```

## å¼€å‘ä¸è¿è¡Œ
1. å®‰è£…ä¾èµ–ï¼š`npm install`
2. å‰ç«¯å¼€å‘ï¼š`npm run dev`ï¼ˆViteï¼Œé»˜è®¤ 5173ï¼‰
3. åç«¯å¯åŠ¨ï¼ˆå¯é€‰ï¼‰ï¼š`cd server && npm install && npm start`ï¼ˆé»˜è®¤ 3001ï¼‰
4. é¢„è§ˆæ‰“åŒ…äº§ç‰©ï¼š`npm run preview`
5. è¡Œæƒ…æŠ“å–ï¼ˆå¯é€‰ï¼‰ï¼šå®‰è£… Python ä¾èµ–åè¿è¡Œ `python3 server/eastmoney.py`ï¼Œä¼šåˆå§‹åŒ– `stock.db`ï¼ˆæˆ– `DB_PATH` æŒ‡å®šè·¯å¾„ï¼‰ã€å…¨é‡æ‹‰å–ä¸»è¡¨ã€äº¤æ˜“æ—¶æ®µåˆ·æ–°ä»·æ ¼ã€å†™å…¥æ—¥çº¿ç¤ºä¾‹ã€‚
6. ï¼ˆå¯é€‰ï¼‰è‡ªå®šä¹‰åç«¯åœ°å€ï¼šåœ¨ `.env.local` è®¾ç½® `VITE_API_BASE=http://127.0.0.1:3001/api`ï¼Œæ‰“åŒ…ç‰ˆé»˜è®¤ä½¿ç”¨ sidecar æä¾›çš„ 3001ã€‚

## æ„å»ºä¸æ‰“åŒ…
- Web æ„å»ºï¼š`npm run build`ï¼ˆå…ˆ TypeScript æ£€æŸ¥ï¼Œå†äº§å‡º `dist/`ï¼‰
- åç«¯æ‰“åŒ…ï¼ˆTauri sidecarï¼‰ï¼š`yarn build:server`ï¼ŒåŸºäº `pkg` å°† `server/index.js` æ‰“æˆ `src-tauri/bin/server.exe`ï¼Œå¹¶å†…ç½® `schema.sql`ï¼Œæ•°æ®åº“æ–‡ä»¶è½åœ¨ Tauri çš„ app æ•°æ®ç›®å½•ï¼ˆ`DATA_DIR`ï¼‰ã€‚
- æ¡Œé¢æ‰“åŒ…ï¼š`yarn build:desktop`ï¼ˆç­‰ä»·äº `yarn build:server && yarn tauri build`ï¼Œéœ€ Rustï¼‰ï¼›å¦‚é‡å›¾æ ‡/å¹³å°ä¾èµ–é”™è¯¯ï¼Œè¯·ç¡®ä¿ `assets/desktop_icon_rgba.png` ä¸ `assets/tray_icon_rgba.png` å­˜åœ¨ä¸”ä¸º RGBAï¼Œå¹¶å®‰è£…åŒ¹é…å¹³å°çš„ Tauri CLI/opensslã€‚
- éƒ¨ç½²å»ºè®®ï¼šå°† `dist/` äº¤ç”±ä»»æ„é™æ€èµ„æºæœåŠ¡å™¨ï¼ˆå¦‚ Nginxï¼‰ï¼›åç«¯æœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œç¡®ä¿å‰ç«¯è°ƒç”¨çš„ API åŸºå€å·²é€šè¿‡é…ç½®æˆ–ç¯å¢ƒå˜é‡æä¾›ã€‚

## æµ‹è¯•
- å‰ç«¯ï¼šæš‚æ— è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå»ºè®®å¼•å…¥ Vitest + React Testing Libraryï¼›ç”¨ä¾‹å‘½å `*.test.ts(x)`ã€‚
- åç«¯è¡Œæƒ…è„šæœ¬ï¼š`server/test_eastmoney.py` ä½¿ç”¨ mock è¦†ç›–ä¸œè´¢è§£æä¸ SQLite å…¥åº“ï¼›è¿è¡Œå‰éœ€å®‰è£… pandas/requestsã€‚

## è´¡çŒ®æŒ‡å¼•
- æäº¤ä¿¡æ¯å»ºè®®éµå¾ª Conventional Commitsï¼Œä¾‹å¦‚ `feat: å¢åŠ æ­¢æŸä¿æŠ¤`ã€`fix: å»é‡é‡å¤é€šçŸ¥`ã€‚
- æäº¤æˆ– PR å‰è¯·é™„å¸¦è¿è¡Œè¿‡çš„å…³é”®å‘½ä»¤ä¸å¿…è¦çš„æˆªå›¾/GIFï¼Œå¹¶è¯´æ˜å¯¹é…ç½®æˆ–æ•°æ®åº“çš„å½±å“ã€‚

## è®¸å¯
æœªæ˜ç¡®è®¸å¯åè®®ï¼Œè¯·åœ¨å‘å¸ƒå‰è¡¥å……åˆé€‚çš„å¼€æºåè®®ï¼ˆå¦‚ MITï¼‰ã€‚
