# 构建与测试记录（本地 AI 执行）

- 2025-11-29 健康检查/风控：未新增或执行测试命令（前端新增模型/券商探活、行情暂停与交易风控）。
- 2025-11-29 非交易时段节流优化：未新增或执行测试命令（仅调整前端轮询逻辑与节流标记）。
- 2025-11-29 文本修复：未新增测试命令（仅修正前端乱码文案），预计不影响构建结果；后续仍需在具备 rollup 可选依赖的环境下重跑 `yarn build` 及相关打包流程。
- 命令：`yarn build`
- 结果：失败
- 输出摘要：rollup 调用时报错 `Cannot find module @rollup/rollup-linux-x64-gnu`（node_modules/rollup/dist/native.js），提示 npm 可选依赖安装缺失。
- 结论：需要在当前环境重新安装依赖（建议删除 node_modules 后在目标平台运行 `yarn install` 或显式安装对应 @rollup/rollup-<platform> 包）后再重试构建。
- 命令：`yarn tauri icon src-tauri/app-icon.png`
- 结果：失败
- 输出摘要：Node 无法加载 `@tauri-apps/cli-linux-x64-gnu`，node_modules 仅存在 `cli-win32-x64-msvc`，需安装对应平台二进制或在 Windows 环境执行。
- 命令：`cargo build`（在 src-tauri/，已启用网络下载依赖）
- 结果：失败
- 输出摘要：tauri 依赖下载成功并进入编译阶段，最终在 `openssl-sys v0.9.111` 构建时缺少 pkg-config/openssl 开发库，提示安装 `pkg-config` 与 `libssl-dev` 等。
- 结论：当前图标缺失问题已消除（构建不再因 icon 报错），但完整构建仍需准备平台工具链（pkg-config、OpenSSL dev、匹配平台的 @tauri-apps/cli 二进制）。
- 命令：`yarn build`（添加本地 Tailwind 流程后）
- 结果：失败
- 输出摘要：缺少 `@rollup/rollup-linux-x64-gnu` 可选依赖导致 rollup native 加载失败；需在目标平台重装依赖或显式安装对应 rollup 二进制包。
- 命令：`yarn build:server` / `yarn build:desktop`
- 结果：未执行（需在 Windows 环境安装 `pkg` 产出 `src-tauri/bin/server.exe` 后再跑 `yarn tauri build`）
- 结论：Sidecar 集成完成但未在本地验证；请在目标平台执行 `yarn build:server && yarn tauri build`。
- 命令：`yarn tauri build`（Windows）
- 结果：成功（有 chunk size warning 与 main.rs 编译警告已清理）
- 输出摘要：产出 MSI/NSIS 安装包；后端 sidecar 启动成功。
- 命令：`python3 server/test_eastmoney.py`
- 结果：失败
- 输出摘要：环境缺少 pandas 依赖（ModuleNotFoundError: No module named 'pandas'），未能执行单元测试；需先安装 pandas/requests 再重试。
